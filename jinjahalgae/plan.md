# 프로젝트 소개

진짜할게는 사용자가 자신의 목표를 설정하고, 달성하지 못했을 경우의 패널티를 걸어서 동기를 부여하는 **나와 지인 간의 계약 기반 목표 달성 앱** 입니다.

사용자는 계약자로서 달성하고 싶은 약속(계약)을 생성하고 지인을 ‘감독자’로 초대합니다. 계약이 시작되면 주마다 정해둔 인증 횟수만큼 실천을 사진으로 인증해야합니다.

감독자는 이 과정을 감독하며, 인증사진을 보고 성공/실패를 판정하게됩니다.

만약 사용자(계약자)가 계약을 성공적으로 마무리짓지 못했을 경우엔 계약을 생성할 때 기입한 패널티를 수행해야합니다.

이를 통해 사용자는 지인들의 응원과 감시 속에서 책임감을 갖고 미루는 습관을 극복하거나 강한 의지를 가지고 목표를 달성할 수 있게 됩니다.

# 기획 의도

새해 다짐, 자격증 공부, 다이어트 등 수많은 목표가 ‘의지 부족’과 ‘강제성 부재’로 인해 실패로 돌아갑니다.

기존의 목표 관리 앱들은 단순히 진행 상황을 기록하기만 할 뿐, 실패했을 때의 실질적인 패널티가 없어 동기 부여에 한계가 있었다고 할 수 있습니다.

**진짜할게**는 이러한 문제를 해결하기 위해 “지인들의 감시”와 “패널티”라는 동기 부여 장치를 제공합니다.

궁극적으로는 사용자가 자신이 하고 싶었던 일을 성공적으로 마칠 수 있도록 돕는 서비스가 되는 것을 목표로 합니다.

# 주요 기능 (MVP 기준)

- Authentication (시큐리티)
  - OAuth2.0 (Kakao, Naver)
  - JWT
- 유저 정보 관리
  - 본인 정보 수정 (닉네임)
  - 회원탈퇴
- 파일 관리

  - S3 presigned url 제공
  - 이미지 저장 (key)

- 계약 관리 (계약자)

  - 계약 생성
  - 계약 서명
  - 계약 포기 (시작 전엔 바로 삭제)
  - 계약 중도 포기
  - 계약 시작 **[어떻게 시작 시킬 건지 고민] + 알림**
  - 계약 종료 **[어떻게 종료 시킬 건지 고민] + 알림**
  - 계약 상세 조회
  - 계약 목록 조회 (내 계약)
  - 계약 목록 조회 (히스토리)
  - 계약 수정

- 계약 관리 (감독자)

  - 계약 서명 생성/저장
  - 감독 중도 포기
  - 계약 상세 조회
  - 계약 목록 조회 (감독중)
  - 계약 목록 조회 (히스토리)

- 인증 관리 (공통)

  - 계약의 특정 달에 대한 인증목록 조회 (달력표시용)
  - 인증 상세 내역 조회 (달력형식, 재인증이 있는 경우 재인증도 같이)

- 인증 관리 (계약자)

  - 인증 생성 [이미지 첨부, 메모]
  - 재인증 생성 **(거절한 감독자만 승인/거절 가능)** [이미지 첨부, 메모]
  - 최근 3개의 인증 조회

- 인증 관리 (감독자)

  - 대기중인 인증 조회
  - 재인증 조회
  - 코멘트와 함께 인증 승인/반려

- 카카오톡 공유 기능

  - 계약 공유 링크 생성 (유효 시간 있음)

- 감독자 초대 관련

  - 비회원이라면 계약 공유 링크 접속 시 회원가입 진행
  - 계약 공유 링크 접속 시 앱/웹에서 진행 선택
  - 계약 공유 링크 접속 시 계약서 페이지 및 사인 작성 페이지로 이동
  - 초대링크(초대 uuid)로 계약서 조회

- 푸쉬알림

  - 알림 생성
  - 알림 목록 조회

  [알림 도메인]

  (감독자 초대)

  - 감독자가 링크를 통해 사인을 완료했을 경우

  (인증 관련)

  - 인증 승인 독려 감독자에게 알림
    - 새로운 인증이 등록된 경우 감독자에게 알림(첫 인증 / 재인증 포함)
    - 일정 시간 이상 감독자가 인증을 확인하지 않았을 경우
  - 허용 가능한 실패 수가 1회 남았을 경우 계약자에게 알림 (2회→1회로 깎이는 순간을 트리거로)
  - 감독자가 인증에대해 피드백(승인/거절)을 했을 때 계약자에게 피드백이 등록됐다는 알림

  (계약관련)

  - 계약이 시작됐을 경우
  - 계약이 완전히 종료되었을 경우 - 사유 포함 (기간 만료, 중도포기)
  - 계약 시작일 n일 전까지 감독자가 한명도 서명을 안한경우 계약 자동삭제 경고 알림
  - 계약 시작일이 됐는데 감독자가 한명도 서명을 안한경우 계약 삭제 통보 알림

- 마이페이지

  - 끝난 계약 목록 조회 (계약 제목 검색, 이행여부 상태 필터링)

- Cloud/devops
  - cicd
  - s3 버킷 설정
  - s3 - cloudfront 연동
  - 카카오 developer 계정 생성 (카카오 id?)
  - 네이버 개발자 계정 생성
  - 구글 플레이 콘솔 계정 생성 및 4만원 가량 결제 (죽이는팀은 좀 그러니까 적당한 이름 하나 만들어서)

# 기술 스택

**[백엔드]**

| 분류         | 기술                                                               |
| ------------ | ------------------------------------------------------------------ |
| 언어         | java (jdk21)                                                       |
| Framework    | Spring boot 3.5.3                                                  |
| DB           | MySQL, Redis, Spring Data JPA                                      |
| Infra/Devops | nginx, docker, docker-compose, github actions, Grafana, Prometheus |
| Cloud        | AWS EC2, AWS S3, AWS Cloudfront                                    |

**[프론트엔드]**

| 분류      | 기술                               |
| --------- | ---------------------------------- |
| 언어      | Typescript                         |
| Framework | Next.js, React Native (Hybrid App) |
| Cloud     | Vercel                             |

# 와이어 프레임

[피그마 URL](https://www.figma.com/design/zGvTQTnczM6fD76rViD8QV/%EC%A7%84%EC%A7%9C%ED%95%A0%EA%B2%8C?node-id=3102-1990&t=xF9E49lj3zV2CuFi-1)

# ERD

[[진짜할게] ERD Cloud URL](https://www.erdcloud.com/d/DG5pzsMxkErkdfYpA)

# 유저 스토리

박도현(28, 남)은 적어도 일주일에 3번은 헬스장에가서 운동을 하고싶은데 의지박약으로 인해 실행하지 못하고 있다. 이대로는 안되겠다고 느낀 그는 ‘진짜할게’ 앱을 통해 한 달 동안 일주일에 3번 헬스장에 가는 계약을 생성하고 지인으로 같은 부트캠프를 이수했던 오나리, 김진현, 유미지 3명을 감독자로 초대했다. 만약 지키지 못했을 경우의 벌칙으로 ‘감독자들에게 치킨 기프티콘을 쏘기’를 스스로 걸었고 서명까지 한데다, 지인들에게 선언을 한셈이기 때문에 이를 악물고 헬스장에 가서 운동을하게 된다.

# 비즈니스 플로우

## 회원가입/로그인 (소셜 로그인)

1. 유저가 카카오 로그인/네이버 로그인을 선택
2. 소셜로그인을 한 뒤, accessToken을 서버로 전송
3. 서버는 유효한 소셜로그인 정보인지 검증 후 회원가입/로그인 진행
4. JWT 발행 (쿠키/Json body)

| 구분            | 단계 | 행위 주체  | 설명                                              | 정상 결과                     | 오류·예외    |
| --------------- | ---- | ---------- | ------------------------------------------------- | ----------------------------- | ------------ | ------- |
| 회원가입/로그인 | 1    | **Client** | 카카오/네이버 OAuth 화면 열기                     | 302 Redirect                  | –            |
|                 | 2    | **Client** | `accessToken` → `/auth/social/[cookie             | body]` POST                   | 200 OK(JSON) | 401/400 |
|                 | 3    | **Server** | 토큰 검증 → 신규회원 DB INSERT 또는 기존회원 조회 | 회원(식별자)                  | 5xx          |
|                 | 4    | **Server** | JWT 발급·반환 (쿠키 or JSON)                      | `accessToken`, `refreshToken` | 5xx          |

## 유저

### 유저 정보 조회

1. 유저가 JWT를 Authorization 헤더에 담아서 정보 조회 요청
   1. 존재하지 않는 유저의 토큰인경우 존재하지 않는 유저입니다 라는 메시지를 서버에서 받게 됨
   2. 존재하는 유저면 유저 정보 반환

### 유저 정보 수정 (닉네임 변경)

1. 유저가 JWT를 Authorization 헤더에 담아서 정보 수정 요청
   1. 존재하지 않는 유저의 토큰인경우 존재하지 않는 유저입니다 라는 메시지를 서버에서 받게 됨
   2. 존재하는 유저면 유저 정보 수정

### 유저 탈퇴

1. 유저가 JWT를 Authorization 헤더에 담아서 탈퇴 요청
   1. 존재하지 않는 유저의 토큰인경우 존재하지 않는 유저입니다 라는 메시지를 서버에서 받게 됨
   2. 존재하는 유저면
      1. 본인이 계약, 감독중인 모든 계약들을 찾아서 전부 중도포기 처리 (계약자로 계약했으면 계약 이행 실패 처리, 감독자로 계약했으면 중도포기 처리)
      2. 참가중인 계약이 없으면 탈퇴처리

## 파일

### Presigned url 발행

1. 유저가 인증사진, 서명을 업로드하기 전, 업로드할 파일명으로 일회용 s3 업로드 url 요청 (파일명 배열)
2. 요청했던 파일명 기반 presigned url이 담긴 배열을 받게 됨

### 파일 업로드 (서명, 인증사진)

1. 일회용 s3 url을 받고 업로드를 한 후, 문제가 없으면 해당 도메인에 맞는 생성 api를 호출할 때 업로드했던 파일명을 그대로 s3 키로써 파라미터에 포함

## 계약

### 계약 생성

1. 유저는 계약을 생성하고 싶다.
2. 계약 생성하기 FAB버튼(+)을 통해 계약 생성 페이지로 이동한다.
3. 가장 먼저 계약서 템플릿을 선택한다. 5개의 선택지가 주어지며 여러 디자인 중 선택할 수 있다.
4. 목표를 설정한다. 계약서 제목, 상세 목표, 한 주에 시행 할 횟수, 한 주 시행 횟수에 따른 총 기간 선택 (달력 이용)
   1. 한 주 시행 횟수에는 ‘당일’ 선택지가 존재하며 단순 내기와 같은 단발성 계약에서 사용할 수 있다.
   2. ‘당일’ 선택 시 달력 선택에서 시작일은 오늘(당일)로 고정되며 종료일은 생성 시점에서 24시간 후로 고정된다.
   3. 또한 다음 페이지에서 실패 가능 횟수도 0으로 고정된다.
   4. 당일 계약의 경우 감독자 서명이 하나라도 생성되는 순간 계약 진행중 상태로 변경된다.
   5. 계약 진행중 상태로 변경 시 계약의 종료일도 최초 감독자 서명 시간(계약 상태 변경 시간) + 24시간으로 변경된다.
5. 사용자는 계약 기간동안 자신이 시행해야하는 총 횟수를 확인한 후 다음으로 넘어갈 수 있다. 이 페이지에서는 실패 기준을 설정한다. 즉 전체 시행해야 하는 횟수 중 몇번의 실패를 눈감아줄 것인지 정한다.
6. 그리고 보상과 벌칙을 설정한다. 계약을 성공적으로 이행했을 때 보상, 계약 이행에 실패하여 목표를 달성하지 못했을 때 벌칙을 설정하며 둘 중 하나는 필수로 작성해야한다.
7. 이후 계약서 미리보기 버튼을 통해 다음 페이지로 이동한다.
8. 처음에 선택한 디자인 템플릿 위에 작성했던 계약 내용이 적힌 상태로 표시되며 전체 계약서를 미리보기로 보여준다. 하단에는 계약서에 서명하기 버튼이 있으며 이를 통해 계약자의 입장으로 계약서에 서명할 수 있다.
9. 서명하기 버튼을 누르면 서명 페이지로 이동한다. 계약자는 직접 서명하게 되며 서명 저장을 누르면 서명은 이미지로 저장되어 따로 관리된다.
10. 서명을 저장하면 이 전에 ‘계약서에 서명하기’ 버튼이 ‘완료’ 버튼으로 변경되며 이를 눌러 계약서 생성을 마무리할 수 있다.
    1. 시작일이 **생성일 바로 다음날인 경우** 완료를 누르는 시점이 생성일로 넘어갔을 때 (ex 23시 59분 계약 생성일 선택 → 00시 01분 계약 생성)
    2. 이 경우엔 **잘못된 생성 요청으로 간주**하고 계약 생성을 취소한 뒤, 계약서 생성 1번 페이지로 이동 시킨다.
11. 완료 버튼을 누르면 카카오톡으로 감독을 초대할 수 있는 버튼이 제공되며 하단에는 복사할 수 있는 초대 링크도 표시하여준다. 그 아래는 1회용 비밀번호(랜덤 생생)를 보여주면 이 역시 복사가 가능하다.
12. 초대 링크의 경우 24시간 동안 유효하며 이후에는 계약 조회 → 초대하기 버튼을 통해 링크를 재생성 해야한다.
    1. 만약 감독자가 링크를 통해 접속하면 계약서에 서명을 할 수 있는데 서명 전(계약서를 직접 보기) 보안을 위해 링크로 들어온 사용자는 앞서 제공된 1회용 비밀번호를 우선 입력해야한다.

### 계약 전체 조회

1. 메인 페이지에서 ‘내 계약’ 탭을 선택(혹은 메인 화면에서의 기본값)
2. 현재 사용자가 계약자의 역할로 진행되고 있는 모든 계약을 표시 (리스트뷰)
3. 각각의 계약에는 오늘 계약 내용에 대한 인증을 할 수 있는 ‘**인증하러 가기**’ 버튼이 있으며 버튼을 누르거나 카드를 누르면(전체 터치 가능) 진행중인 계약을 눌러 계약 상세보기 페이지로 이동할 수 있다.

### 계약 상세 조회

1. 계약 상세 페이지에는 상단에 개요와 인증기록 탭이 있다.
2. 개요 탭 선택 시 계약 내용에 대한 상세 정보와 실제로 작성했던 계약서를 볼 수 있는 버튼이 있다. 이 경우 **실제 서명도 표시된다.** (이미 모든 서명이 완료되었기 때문에 보안 문제 x)

   개요탭에 들어가는 내용 :

   1. 페이지 최상단에 ‘계약서 목표’ 내용
   2. 일주일 n회
   3. 감독자 - n명 (김ㅇㅇ 외 m명)

      계약 시작 전일 경우 : **n명/5명**으로 표기

      계약 시작 후 : **n명** 으로 표기

   4. 남은 실패 횟수 - n회
   5. 달성률 바 현재 인증횟수 / 총 필요 인증횟수
   6. 계약기간 비율 바

3. 하단에는 오늘의 인증하기 버튼과 함께 계약 수정하기, 감독 초대하기(링크 생성), 계약 포기하기 버튼이 있다.

   1. 계약 수정 : 감독자 서명이 아직 존재하지 않을 경우에만 가능 (문구로 안내)
      1. 감독자가 한명이라도 서명한 경우 수정하기 버튼이 사라진다.
   2. 감독 초대하기 :
      1. 일반 계약 : 계약 시작일이 되기 전까지만 클릭 가능하다. 계약이 시작되면 버튼이 사라진다.
      2. ‘당일’ 계약 : 감독 1명이 서명하기 전까지만 클릭 가능하다. 감독 1명이 서명하면 계약이 시작되면서 버튼이 사라진다.
      3. 클릭 후 : 만약 초대 링크가 만료되지 않은 상황이라면 감독 초대하기 버튼 클릭 시 이전에 생성되었던 링크를 다시 보여준다. 만료된 상태라면 새로 생성한다.
   3. 계약 포기하기 : **“스스로 계약을 중도포기할 경우, 이전에 정했던 실패 시 벌칙을 수행해야합니다. 중도포기하시겠습니까?“** 문구로 경고를 띄운 후 포기하기를 누르면 계약이 포기된다. 그 이후의 과정은 [계약 포기](https://www.notion.so/22915a01205480479edded9a744ff88f?pvs=21) 를 참고

4. 인증기록 탭 선택 시
5. 가장 최근에 있었던 인증 기록 3개를 보여준다.
6. 각각의 인증 기록은 인증을 제출하며 입력한 내용을 보여주면서 현재 감독자들이 판단한 결과도 표시해준다. (승인, 거절, 대기중)
7. 또한 아래의 달력에서 최근 3개가 아닌 다른 날짜에 있었던 기록들도 볼 수 있다.
8. 달력에서 날짜 클릭 시 해당 날짜에 올렸던 인증에 대한 정보와 감독자 판단 결과를 볼 수 있다.
9. 만약 그 결과가 ‘거절됨’ 이라면 재인증하기 버튼이 같이 있게된다.
10. 재인증 버튼 클릭 시 단 1회에 한하여 다시 인증을 제출할 수 있다.

### 계약 수정

1. 계약 개요에서 계약 수정하기를 누르면 계약의 수정이 가능하다.
   1. 계약 수정은 한명의 감독자도 서명하지 않은 상태에서만 가능하다.
2. 계약의 템플릿을 정하면 원래 계약의 목표, 기간, 실패 횟수 등의 값이 채워져 있고 사용자는 원하는 값만 수정이 가능하다.
3. 계약서 미리보기 버튼을 눌러 수정한 결과를 확인 할수 있고 미리보기의 하단의 수정 완료 버튼을 누르면 수정사항이 서버에 반영된다.
   1. 수정에 들어온 사이 감독자가 서명을 한 경우 : 감독자가 서명 했다고 예외를 반환
   2. 감독자가 서명을하고 완료버튼을 누르기전에 계약자가 계약서 수정을 했다면 : updatedAt을 비교해서 수정사항이 생긴 계약서라고 예외를 반환하고 페이지 새로고침 (새로운 계약서 정보 조회 요청)

### 계약 포기

1. 아직 계약 시작일 전이라면 계약자는 계약을 포기할 수 있다.
   1. 이 경우 모든 데이터가 삭제된다.
2. 계약 시작 이후에는 상세 페이지를 통해 중도 포기를 할 수 있다. 중도 포기의 경우 데이터는 남는다.

### 계약 시작

1. 계약의 시작일이 되면 스케줄러가 날짜가 바뀌는 00시에 계약을 자동으로 계약 진행중 상태로 변경한다.
   1. 계약의 감독이 1명도 없는 경우 계약은 자동으로 삭제된다.

### 계약 종료

1. 계약이 중도 포기 없이 처음 설정한 종료 날짜가 되면 종료날짜가 지나는 00시에 스케쥴러가 계약을 종료한다.
2. 인증 실패의 수가 처음 설정한 실패 가능 횟수를 넘지 않았다면 **계약 이행 성공 상태로 저장**된다.
3. 만약 실패 가능 횟수를 넘겼다면 **계약 이행 실패 상태로 저장**된다.
4. 종료된 계약의 경우 성공 여부와 관계 없이 마이페이지 계약 히스토리에서 확인 가능하다.
5. 계약 히스토리에서 계약 검색과 성공/실패 필터링 기능을 제공한다.

### 감독하고 있는 계약 조회

1. 메인 화면에서 [감독중] 탭을 선택
2. 감독 중인 계약들의 개요가 담긴 카드들이 스크롤뷰로 보인다.
3. 계약의 개요에는 목표, 기간, 매주 시행 횟수, 감독자들의 이름, 달성률 바, 계약기간 바, 현재실행횟수/전체 실행 목표 횟수, 보상, 벌칙을 포함한다
4. 계약의 개요 카드 우측 상단의 계약서 보기 버튼을 클릭하면
   1. 계약서를 다시 볼 수 있고, 이미지를 다운 받을 수 있다.
   2. 하단에는 **[계약 포기하기]** 버튼이 있다. 계약이 종료되기 전까지만 버튼이 존재한다.
   3. 계약 포기하기 : “ **만약 모든 감독자가 포기한다면 계약자는 해당 벌칙을 수행하지 않습니다. 정말 감독을 포기하시겠습니까?** “ 문구를 띄운 후 [포기하기] 버튼을 다시 누른다면
      1. 감독자는 해당 계약에 더이상 접근할 수 없게 된다. 감독중 탭에 해당 계약이 사라진다.
      2. 해당 감독자는 계약에서 감독 포기 상태로 변경된다

### **감독하고 있는 계약 상세 조회**

1. 메인 페이지의 감독중 탭을 누르고 계약의 개요 카드 하단의 [인증 확인하러 가기] 버튼을 클릭
2. 대기중인 인증은 24시간 이내에 감독이 처리하지 않으면 승인으로 자동처리 된다.
   1. 승인 가능 시간을 createdAt으로 계산해서 “HH시간 남음”, 1시간 미만의 경우 “mm분 남음”으로 알려준다.
3. 대기중인 인증 아래 인증 현황에 ‘계약 목표’가 나오고 그 아래 달력과 인증 리스트가 나온다.
4. [인증/재인증 상세 조회](https://www.notion.so/22915a012054801ab508e627321909fe?pvs=21)를 참고. 계약자의 인증 내역과 나의 승인 내역을 확인할 수 있다.

### 계약서 다운로드

시작일이 지나고 감독자가 1명이상 있어서 시작 상태가 된 계약에 대해 계약서를 다운로드 받을 수 있다.

(계약자)

1. 메인 화면에서 내 계약 탭의 특정 진행중인 계약의 상세 페이지로 이동
2. 진행현황 카드 우측 상단의 ‘계약서 보기’ 버튼을 누르면 상세 계약서 모달창이 뜨는데, 우측상단에 다운로드 버튼이 있어서 누르면 이미지파일로 다운 받을 수 있다.

(감독자)

1. 메인 화면에서 감독중 탭의 감독중인 계약 목록이 리스트 뷰 형식으로 보임
2. 계약 목록의 카드 우측 상단에 ‘계약서 보기’ 버튼을 누르면 상세 계약서 모달창이 뜨는데, 우측상단에 다운로드 버튼이 있어서 누르면 이미지파일로 다운 받을 수 있다.

## 초대

1. 계약이 생성된 후 감독을 초대하기 위한 초대 링크와 비밀번호가 나타난다.
2. 초대링크의 유효시간은 24시간으로
   1. 유효시간이 지나지 않은 경우 계약 개요에서 초대하기 버튼을 누르면 같은 링크와 비밀번호가 반환된다.
   2. 유효시간이 지난경우 새 초대 링크와 비밀번호를 발급해 준다.
3. 감독이 링크에 접속한 경우
   1. 링크가 유효하면(초대 링크가 살아있는 경우) 비밀번호 입력창이 나온다.
   2. 유효하지 않는 경우(초대 링크가 만료된 경우) 만료되었거나 존재하지 않는 초대코드라는 예외를 반환한다.
   3. 유효하지 않는 경우(5명의 감독자가 전부 채워진 경우) 감독자가 전부 채워졌다는 예외를 반환한다.
4. 비밀번호 입력에서
   1. 틀린 비밀번호를 입력한 경우 예외를 반환한다.
   2. 적절한 비밀번호를 입력한 경우 계약서 미리보기를 보여준다.
      1. 계약서에 있는 서명은 약식으로 보여준다 (서명 완료, 싸인 완료 등 템플릿에 맞게)
5. 계약서 서명하기를 누르면
   1. 계약자가 본인의 계약의 초대 링크를 접속하거나 이미 합류한 감독자인 경우 내 계약 페이지로 리다이렉트 된다.
   2. 로그인을 안한 경우 로그인 창이 나오고 로그인을 하고 서명하기를 눌러야 서명을 하는 페이지로 넘어간다.
6. 서명을 하고 완료 버튼을 누르면 감독자가 정상적으로 계약에 합류된다.
   1. 이미 감독자 5명이 다 채워진 경우 전부 채워졌다는 예외를 반환한다.

## 알림

아래의 상황마다 사용자에게 알림이 추가된다 (기본적으로 안 읽음 상태)

| 상황          | 알리는 대상    |
| ------------- | -------------- |
| 감독자 추가됨 | 계약자         |
| 감독자 포기함 | 계약자         |
| 계약 시작함   | 계약자, 감독자 |
| 계약 종료됨   | 계약자, 감독자 |
| 인증 등록됨   | 감독자         |
| 인증 승인됨   | 계약자         |
| 인증 거절됨   | 계약자         |
| 피드백 등록됨 | 계약자         |
| 재인증 등록됨 | 모든 감독자    |

- 모든 사용자는 우측 상단의 종 모양 버튼을 눌러 알림 목록을 확인할 수 있다.
- 각 알림은 타입에 따라 다른 색의 아이콘으로 종류를 확인할 수 있다.

- 개별적으로 알림을 삭제 가능
- 모든 알림을 일괄적으로 삭제 가능

![image.png](attachment:538c479c-f104-4afa-9c35-6710098bea3d:image.png)

- 알림을 클릭하면
  → 해당 알림 관련 계약의 상세페이지(개요)로 이동한다.

**예외 상황**

알림을 클릭했을 때

- 해당 계약이 이미 삭제된 경우라면 “이미 삭제된 계약입니다”를 띄우고 이전 화면으로 돌아간다
- 해당 계약에 계약자/감독자로 참여하고 있지 않다면 “접근 권한이 없는 계약입니다”를 띄우고 이전 화면으로 돌아간다 (중도 포기 후 예전 알림을 누르는 등의 상황)
- 해당 계약에 감독자로 참여했었지만 [감독포기] 상태라면 “접근 권한이 없는 계약입니다”를 띄우고 이전 화면으로 돌아간다

## 인증 / 재인증

### 인증 생성

1. 유저가 계약 상세 페이지에서 사진으로 인증하기 버튼을 클릭
2. 인증 제출을 위한 모달이 바텀 시트로 출력
3. 이미지 업로드 버튼을 통해 최대 3장의 사진을 업로드 (카메라 실행, 갤러리 접근)
4. 업로드한 이미지의 순서 지정가능 (1 번째 사진이 인증 카드의 대표 사진으로 출력)
5. 선택 입력 사항으로 인증 메모 작성 가능 (인증 사진에 대한 설명을 기입)
6. 제출하기 버튼을 누르는 경우 “**이대로 등록하시겠습니까? 등록 후에는 수정이 불가합니다**” 모달 띄우기
7. 확인을 누르는 경우 해당 계약에 대한 오늘자 인증 생성

### 최근 인증 조회

1. 유저가 계약 상세 페이지에서 인증 기록 탭에 접근
2. 최근에 이루어진 3개의 인증을 리스트 형식으로 출력
   1. 인증 + 재인증 구분 없이 최근 3개의 인증으로 출력

### 재인증 생성

1. 계약 상세 페이지의 인증 기록 탭에서 재인증 버튼을 클릭
   1. **인증이 거절 처리 된 후 24시간 이전에만 버튼이 출력**
   2. 원본 인증에 대한 1번의 재인증만 가능 → 재인증의 재인증 불가능
2. 인증 제출을 위한 모달이 바텀 시트로 출력
3. 이미지 업로드 버튼을 통해 최대 3장의 사진을 업로드 (카메라 실행, 갤러리 접근)
   1. 최소 1장의 사진이 필수로 요구됨
4. 업로드한 이미지의 순서 지정가능 (1 번째 사진이 인증 카드의 대표 사진으로 출력)
5. 인증 메모 작성 가능 (인증 사진에 대한 설명을 기입)
   1. 인증 메모는 선택 입력 사항
6. 제출하기 버튼을 누르는 경우 **“이대로 등록하시겠습니까? 등록 후에는 수정이 불가합니다”** 모달 띄우기
7. 확인을 누르는 경우 **원본 인증에 대한** 재인증 생성 (ex. 원본 인증이 17일에 등록됐다면 재인증도 17일을 선택했을 때 보여줌)
   1. 모든 감독자들에게 notification + (추후 fcm 추가되면 푸시알림까지) 보내고 재인증을 생성

### 인증/재인증 상세 조회

1. 계약자/감독자가 계약 상세 페이지에 접근
   1. 계약자의 경우 계약 상세 페이지의 인증 기록 탭 접근
2. 달력에 인증 조회를 원하는 날짜를 클릭
   1. 인증이 존재하는 경우 달력 하단에 인증 출력 (카드 형식)
   2. 재인증이 존재하는 경우 인증과 재인증을 별도의 카드로 출력(세로 리스트뷰 형식으로 2개의 카드를 출력)
   3. 인증이 존재하지 않는 경우 아무것도 출력하지 않음
3. 출력된 인증 카드를 클릭하여 상세 페이지 접근
4. 인증 상세 페이지에서 감독들의 승인/거절 사유와 인증 사진을 볼 수 있음

### 대기중인 인증 조회

1. 유저가 감독중 리스트에서 자신이 감독자로 수행중인 계약을 선택
2. 해당 계약의 상세 페이지에 접근
3. 대기중인 인증 (감독자가 처리해야 할 인증)이 존재하는 경우 감독자 계약 상세 페이지 상단에 카드 형식으로 출력
   1. 재인증의 경우 원본 인증과 다른 별도의 카드색과 재인증 태그가 붙은 요청으로 출력
   2. 대기중인 인증 카드를 눌러 인증에 대한 상세 정보 조회 가능
4. 승인/거절 버튼중 하나를 선택해 대기중인 해당 인증에 대해 처리를 수행
5. 버튼을 눌러 처리가 완료된 경우 상단의 대기중인 인증에서 해당 카드가 제거됨
6. 처리 후 아래의 인증현황 달력에서 처리한 인증에 해당하는 날짜로 조회하여 확인 가능
   1. 처리를 완료한 인증에 대해서만 달력으로 조회가 가능 (처리한 인증만 달력 아래 카드가 생성됨)
   2. 처리하지 않은 인증인 경우 상단의 **‘대기중인 인증’**에서만 출력 (일자를 클릭해도 아래에 카드가 생성되지 않음)

## 인증 피드백 (감독자)

1. 유저가 감독중 리스트에서 자신이 감독자로 수행중인 계약을 선택
2. 해당 계약의 상세 페이지로 이동
3. 페이지 상단 ‘대기 중인 인증’ 섹션에 있는 인증 카드를 확인하고 승인/거절을 선택가능
4. 승인/거절 버튼을 누르면 해당 인증에 대해 코멘트를 남길 수 있는 모달창이 뜸. (100자 제한, Optional)
   1. 문자열 템플릿도 버튼형식으로 제공되고 템플릿 버튼을 누르면 코멘트에 지정된 템플릿 문자열이 추가 됨
5. 만약 재인증에서도 **과반수 이상 인증 거절**을 선택하면 그 날짜의 인증은 실패한 것으로 처리함
6. 인증이 생성되고 24시간이 지났을 때까지 과반수가 피드백을 주지 않는 경우 자동으로 인증을 ‘승인’처리를 한다.

# 인증 처리 정책

### [인증 올릴 수 있는 횟수]

- 일주일에 여러번 인증 가능 (하루에 한 번씩 가능)

### [계약 실패횟수 까는 조건]

- 한 주가 지났을 때 인증빈도 횟수 만큼 인증 승인을 못받은 경우
  - ex) 주 4회로 설정하였는데 총 7번 인증하였고 (승인이 3회/거절이 4회)인 경우 → 총 실패 가능 횟수에서 1회 차감

### [인증 결과 판정 예시] (인증 재인증 모두 해당)

반절 이상의 반대 표를 받으면 최종 거절 판정

감독자 4명으로 가정했을 때 :

모두 응답없음 → 승인

반대 1표 응답없음 3표 → 승인

반대 2표 응답없음 2표 → 거절

반대 2표 승인 2표→ 거절

반대 3표 → 거절

### [인증 상태처리 시점]

- 인증에 대해 모든 감독자들이 피드백(승인/거절)을 선택하지 않으면 24시간이 지나야 남은 승인/거절 비율에 의해 상태가 최종 변경
- 인증에 대해 모든 감독자들이 피드백(승인/거절)을 선택하면 즉시 승인/거절 비율에 의해 상태 변경 (마지막 피드백 감독자의 선택이후 즉시)

### [실패 가능 횟수 차감 예시]

주 4회 승인일 때

승인 3회 거절 4회라면 → 실패 1회 (4-3=1)

# 협업 방식

- Swagger를 통해 백엔드 API 명세를 상세히 제공
- 백엔드 변경사항이 dev 브랜치에 merge 될 때마다, 프론트엔드에게 변경 내역을 상세히 공유

# 일정 관리(WBS)

[WBS 노션 URL](https://www.notion.so/WBS-22215a012054816188efef799af2d441?pvs=21)

# 엣지케이스 처리

[엣지케이스](https://www.notion.so/22215a01205480e8ac9ac594aba338ba?pvs=21)
